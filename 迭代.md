---
settings:
  post:
    name: 贴，Posts
    collection: posts
    sample: 测试文章
    fields:
      name: slug
      selective: [date, content, layout, categories]
settings2:
  - collection: collections
    name: 集，Collections
    sample: posts
    fields:
      name: label
      selective: [name, output, docs, relative_directory, permalink]
  - collection: posts
    name: 贴，Posts
    sample: 测试文章
    fields:
      name: slug
      selective: [date, content, layout, categories]
---
## 集，Collections
{{site.collections|map:'label'|join:', '}}
{%assign collection=site.collections|find:'label','posts'-%}
{{collection|join:', '}}

{%assign selective='label, name, output, docs, relative_directory, permalink'|split:', '-%}
{{selective|join:'|'}}
{%for collection in site.collections-%}
{%for a in selective-%}
{%if a=='docs'%}[{{collection[a]|size}}]{%else%}{{collection[a]}}{%endif-%}
|{%endfor%}
{%endfor%}

{%for s in page.settings2%}
{%assign l=site[s.collection]%}
## {{s.name}}
{{l|map:s.fields.name|join:', '}}
{%assign post=l|find:s.fields.name,s.sample-%}
{{post|join:', '}}

{%assign selective=s.fields.name|concat:s.fields.selective%}
{{selective|join:'|'}}
{%for i in l-%}
{%for field in selective-%}
{%if field=='date'%}{{i[field]|date:'%Y-%m-%d'-}}
{%elsif i[field].first%}[{{i[field].size}}]
{%-else-%}
  {%assign a=i[field]|newline_to_br|strip_newlines-%}
  {%-if a.size>50%}[{{a.size}}]{%
  else%}{{a|replace:'<','&lt;'}}{%endif-%}
{%endif%}|{%endfor%}
{%endfor%}
{%endfor%}
